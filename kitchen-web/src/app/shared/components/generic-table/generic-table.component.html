<div class="table-wrapper" [class.loading]="loading">
    <div class="loading-overlay" *ngIf="loading">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  
    <table 
      mat-table 
      [dataSource]="data" 
      matSort 
      [matSortActive]="sortField"
      [matSortDirection]="sortDir"
      (matSortChange)="onSort($event)"
      >
  
      <ng-container *ngFor="let column of columns" [matColumnDef]="column.key.toString()">
        <th mat-header-cell *matHeaderCellDef [mat-sort-header]="column.sortable ? column.key.toString() : ''">
          {{ column.label }}
        </th>
        <td mat-cell *matCellDef="let row">
          {{ getValue(row, column) }}
        </td>
      </ng-container>
  
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Ações</th>
        <td mat-cell *matCellDef="let row" class="actions">
          <button mat-icon-button color="primary" (click)="view.emit(row)">
            <mat-icon>visibility</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="remove.emit(row)">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator
      [length]="totalItems"
      [pageIndex]="page - 1"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5,10,20,50]"
      (page)="onPage($event)">
    </mat-paginator>
  </div>
  
  <div *ngIf="!loading && data.length === 0" class="no-item">
    <h2>Nenhum item encontrado</h2>
  </div>